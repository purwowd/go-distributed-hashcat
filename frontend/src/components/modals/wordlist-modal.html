<!-- Modern Wordlist Upload Modal -->
<div x-show="showWordlistModal" 
     x-transition:enter="transition ease-out duration-300" 
     x-transition:enter-start="opacity-0 scale-90" 
     x-transition:enter-end="opacity-100 scale-100" 
     x-transition:leave="transition ease-in duration-200" 
     x-transition:leave-start="opacity-100 scale-100" 
     x-transition:leave-end="opacity-0 scale-90" 
     class="modal-modern">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="modal-backdrop" @click="closeWordlistModal()"></div>
        <div class="modal-content animate-scale-in">
            <form @submit.prevent="wordlistForm.file && uploadWordlist(wordlistForm.file)">
                <div class="p-6 border-b border-gray-100/50">
                    <div class="flex items-center space-x-3 mb-2">
                        <div class="icon-modern icon-danger">
                            <i class="fas fa-list-ul text-sm"></i>
                        </div>
                        <h3 class="text-xl font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent">Upload Wordlist</h3>
                    </div>
                    <p class="text-gray-600 text-sm">Upload dictionary files for password cracking attacks</p>
                </div>
                
                <div class="p-6 space-y-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Select Wordlist <span class="text-red-500">*</span></label>
                        <div class="relative">
                            <input type="file" 
                                   @change="wordlistForm.file = $event.target.files[0]" 
                                   accept=".txt,.dic,.wordlist" 
                                   required 
                                   :disabled="isUploading"
                                   :class="isUploading ? 'input-modern opacity-50 cursor-not-allowed file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-gray-100 file:text-gray-500' : 'input-modern file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100'">
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Supported formats: txt, dic, wordlist files</p>
                        <p class="text-xs text-gray-400 mt-1">Popular examples: rockyou.txt, common-passwords.txt, custom lists</p>
                        
                        <!-- Upload Status Indicator -->
                        <div x-show="isUploading" class="mt-2 p-2 bg-blue-50 border border-blue-200 rounded-lg">
                            <p class="text-xs text-blue-700 flex items-center">
                                <i class="fas fa-info-circle mr-2"></i>
                                File selection is disabled during upload. Please wait for the current upload to complete.
                            </p>
                        </div>
                    </div>
                    
                                            <div x-show="wordlistForm.file" class="bg-gradient-to-r from-gray-50/50 to-purple-50/50 backdrop-blur-sm rounded-xl p-4 border border-gray-200/50">
                            <h4 class="text-sm font-semibold text-gray-700 mb-3 flex items-center">
                                <i class="fas fa-info-circle text-purple-600 mr-2"></i>Wordlist Information
                            </h4>
                            <div class="space-y-2 text-sm text-gray-600">
                                <div class="flex justify-between">
                                    <span>Filename:</span>
                                    <span class="font-medium" x-text="wordlistForm.file?.name">-</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Size:</span>
                                    <span class="font-medium" x-text="wordlistForm.file ? getFileSizeInfo(wordlistForm.file).formattedSize : '-'">-</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Type:</span>
                                    <span class="font-medium" x-text="wordlistForm.file?.type || 'Text file'">-</span>
                                </div>
                            </div>
                            
                            <!-- File Size Warning -->
                            <div x-show="wordlistForm.file && getFileSizeWarning(wordlistForm.file).showWarning" 
                                 class="mt-3 p-3 rounded-lg border"
                                 :class="getFileSizeWarning(wordlistForm.file).warningType === 'error' ? 'bg-red-50 border-red-200' : getFileSizeWarning(wordlistForm.file).warningType === 'warning' ? 'bg-amber-50 border-amber-200' : 'bg-blue-50 border-blue-200'">
                                <div class="flex items-start">
                                    <i class="fas fa-exclamation-triangle mr-2 mt-0.5"
                                       :class="getFileSizeWarning(wordlistForm.file).warningType === 'error' ? 'text-red-600' : getFileSizeWarning(wordlistForm.file).warningType === 'warning' ? 'text-amber-600' : 'text-blue-600'"></i>
                                    <div class="text-xs"
                                         :class="getFileSizeWarning(wordlistForm.file).warningType === 'error' ? 'text-red-800' : getFileSizeWarning(wordlistForm.file).warningType === 'warning' ? 'text-amber-800' : 'text-blue-800'">
                                        <p class="font-medium mb-1" x-text="getFileSizeWarning(wordlistForm.file).warningType === 'error' ? 'File Too Large' : getFileSizeWarning(wordlistForm.file).warningType === 'warning' ? 'Large File Warning' : 'File Size Info'"></p>
                                        <p x-text="getFileSizeWarning(wordlistForm.file).message"></p>
                                        
                                        <!-- CLI Command for Large Files -->
                                        <div x-show="getFileSizeWarning(wordlistForm.file).warningType === 'error'" class="mt-2 p-2 bg-red-100 rounded text-red-900">
                                            <p class="font-medium mb-1">Use CLI Upload Instead:</p>
                                            <code class="block font-mono text-xs">
                                                ./server wordlist upload /path/to/your-file.txt --name "filename"
                                            </code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
                
                <!-- Upload Progress Indicator -->
                <div x-show="isUploading" 
                     x-transition:enter="transition ease-out duration-200"
                     x-transition:enter-start="opacity-0 translate-y-2"
                     x-transition:enter-end="opacity-100 translate-y-0"
                     class="px-6 py-4 bg-green-50/50 border-t border-green-100">
                    <div class="space-y-3">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-green-700" x-text="uploadStatus">Preparing...</span>
                            <span class="text-sm text-green-600 font-medium" x-text="uploadProgress + '%'">0%</span>
                        </div>
                        
                        <div class="w-full bg-green-200 rounded-full h-2 overflow-hidden">
                            <div class="bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all duration-300 ease-out"
                                 :style="`width: ${uploadProgress}%`"></div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3 text-xs">
                            <div class="text-center">
                                <p class="text-green-600">Speed</p>
                                <p class="font-medium text-green-700" x-text="uploadSpeed + ' MB/s'">0 MB/s</p>
                            </div>
                            <div class="text-center">
                                <p class="text-green-600">Time</p>
                                <p class="font-medium text-green-700" x-text="getUploadTimeElapsed()">0s</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-gray-50/50 to-white/50 backdrop-blur-sm border-t border-gray-100/50 px-6 py-4 flex flex-col sm:flex-row gap-3 sm:justify-end">
                    <button type="button" 
                            @click="closeWordlistModal()" 
                            :disabled="isUploading"
                            :class="isUploading ? 'btn-secondary opacity-50 cursor-not-allowed' : 'btn-secondary'"
                            class="order-2 sm:order-1">
                        <i class="fas fa-times mr-2"></i>Cancel
                    </button>
                    <button type="submit" 
                            :disabled="!wordlistForm.file || isUploading"
                            :class="(!wordlistForm.file || isUploading) ? 'btn-primary opacity-50 cursor-not-allowed' : 'btn-primary'"
                            class="order-1 sm:order-2">
                        <i :class="isUploading ? 'fas fa-spinner fa-spin mr-2' : 'fas fa-upload mr-2'"></i>
                        <span x-text="isUploading ? 'Uploading...' : 'Upload Wordlist'">Upload Wordlist</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div> 
