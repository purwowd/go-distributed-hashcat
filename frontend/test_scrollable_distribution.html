<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Scrollable Distribution Preview</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="src/styles/main.css">
</head>
<body class="bg-gray-100 p-8">
    <div x-data="testData()" class="max-w-4xl mx-auto">
        <h1 class="text-2xl font-bold mb-6">Test Scrollable Distribution Preview</h1>
        
        <!-- Mock Distribution Preview -->
        <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 border border-blue-200">
            <div class="mb-4">
                <h3 class="text-lg font-semibold text-blue-800 flex items-center">
                    <i class="fas fa-network-wired text-blue-600 mr-2"></i>Wordlist Distribution Preview
                </h3>
                <p class="text-sm text-blue-700 mt-1">
                    Dictionary distribution based on agent performance and speed data
                </p>
            </div>
            
            <!-- Scrollable Agent List -->
            <div class="max-h-64 overflow-y-auto border border-gray-200 rounded-lg bg-gray-50 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 mb-4">
                <div class="space-y-2 p-2">
                    <template x-for="(agent, index) in mockAgents" :key="agent.id">
                        <div class="flex items-center justify-between p-3 bg-white rounded border border-gray-200 hover:bg-gray-50 transition-colors">
                            <div class="flex items-center space-x-3">
                                <div class="w-6 h-6 rounded-full bg-purple-500 text-white flex items-center justify-center text-xs font-bold" x-text="index + 1"></div>
                                <div>
                                    <div class="font-medium text-gray-900 text-sm" x-text="agent.name"></div>
                                    <div class="text-xs text-gray-500" x-text="agent.ip_address"></div>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <!-- Resource Type Badge -->
                                <span class="text-xs px-2 py-1 rounded font-medium bg-blue-100 text-blue-800"
                                      x-text="agent.type">
                                </span>
                                
                                <!-- Agent Speed Badge -->
                                <span class="text-xs px-2 py-1 rounded font-medium"
                                      :class="{
                                          'bg-green-100 text-green-800': agent.speed > 0,
                                          'bg-yellow-100 text-yellow-800': agent.speed === 0
                                      }"
                                      :title="agent.speed > 0 ? `Hashcat Speed: ${agent.speed} H/s` : 'No speed data available'">
                                    <i class="fas" :class="agent.speed > 0 ? 'fa-tachometer-alt' : 'fa-exclamation-triangle'"></i>
                                    <span x-text="agent.speed > 0 ? `${agent.speed} H/s` : 'No Speed'"></span>
                                </span>
                                
                                <!-- Allocation Percentage -->
                                <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded font-medium" 
                                      x-text="`${agent.percentage}%`"
                                      title="Dictionary allocation percentage based on agent speed">
                                </span>
                                
                                <!-- Assigned Words -->
                                <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded" 
                                      x-text="`${agent.words.toLocaleString()} words`"
                                      title="Number of dictionary words assigned to this agent">
                                </span>
                                
                                <!-- Job Name Preview -->
                                <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded font-mono" 
                                      x-text="`test-job - ${agent.name}`">
                                </span>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
            
            <!-- Distribution Summary -->
            <div class="bg-white rounded-lg p-3 border border-gray-200">
                <div class="flex items-center justify-between text-sm">
                    <span class="font-medium text-gray-700">Distribution Summary:</span>
                    <span class="text-gray-600">
                        <span x-text="mockAgents.length"></span> agents, 
                        <span x-text="totalWords.toLocaleString()"></span> total words
                    </span>
                </div>
                <div class="mt-2 text-xs text-gray-600">
                    <span class="text-green-600">
                        <i class="fas fa-check-circle mr-1"></i>Speed-based distribution active
                    </span>
                </div>
                
                <!-- Speed Distribution Explanation -->
                <div class="mt-2 p-2 bg-green-50 rounded border border-green-200">
                    <div class="text-xs text-green-800">
                        <i class="fas fa-info-circle mr-1"></i>
                        <strong>Speed-based Distribution:</strong> Dictionary words are distributed proportionally based on each agent's hashcat benchmark speed (H/s). 
                        Faster agents receive more words to process, optimizing overall cracking performance.
                    </div>
                </div>
            </div>
        </div>

        <!-- Scroll Info -->
        <div class="mt-6 bg-yellow-50 p-4 rounded border border-yellow-200">
            <h4 class="font-semibold text-yellow-800 mb-2">Scrolling Information</h4>
            <ul class="text-sm text-yellow-700 space-y-1">
                <li>• Distribution preview area has fixed height (max-h-64 = 256px)</li>
                <li>• Scrollbar appears automatically when content exceeds height</li>
                <li>• Custom thin scrollbar with hover effects</li>
                <li>• Each agent item shows speed, percentage, and word count</li>
                <li>• Responsive design maintains readability</li>
            </ul>
        </div>

        <!-- Agent Count Control -->
        <div class="mt-6 bg-blue-50 p-4 rounded border border-blue-200">
            <h4 class="font-semibold text-blue-800 mb-2">Test Controls</h4>
            <div class="flex items-center space-x-4">
                <label class="text-sm text-blue-700">Number of Agents:</label>
                <input type="range" 
                       x-model="agentCount" 
                       min="3" 
                       max="50" 
                       class="w-32"
                       @input="updateAgents()">
                <span class="text-sm font-medium text-blue-800" x-text="agentCount"></span>
            </div>
            <p class="text-xs text-blue-600 mt-2">
                Adjust the slider to test scrolling with different numbers of agents
            </p>
        </div>
    </div>

    <script>
        function testData() {
            return {
                agentCount: 15,
                totalWords: 758561,
                
                get mockAgents() {
                    const agents = []
                    const types = ['CPU', 'GPU']
                    const speeds = [1000, 1500, 2000, 2500, 3000, 4000, 5000]
                    
                    for (let i = 1; i <= this.agentCount; i++) {
                        const type = types[i % types.length]
                        const speed = speeds[i % speeds.length]
                        const percentage = Math.round((speed / this.getTotalSpeed()) * 100)
                        const words = Math.round((speed / this.getTotalSpeed()) * this.totalWords)
                        
                        agents.push({
                            id: i.toString(),
                            name: `agent-${String.fromCharCode(64 + ((i - 1) % 26) + 1)}`,
                            ip_address: `192.168.1.${100 + i}`,
                            type: type,
                            speed: speed,
                            percentage: percentage,
                            words: words
                        })
                    }
                    
                    // Sort by speed (highest first)
                    return agents.sort((a, b) => b.speed - a.speed)
                },
                
                getTotalSpeed() {
                    return this.mockAgents.reduce((sum, agent) => sum + agent.speed, 0)
                },
                
                updateAgents() {
                    // Force reactivity update
                    this.$nextTick(() => {
                        // Recalculate percentages and words
                        const totalSpeed = this.getTotalSpeed()
                        this.mockAgents.forEach(agent => {
                            agent.percentage = Math.round((agent.speed / totalSpeed) * 100)
                            agent.words = Math.round((agent.speed / totalSpeed) * this.totalWords)
                        })
                    })
                }
            }
        }
    </script>
</body>
</html>
